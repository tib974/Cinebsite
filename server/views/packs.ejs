<header class="page-header">
  <div>
    <h2>Packs disponibles</h2>
    <p style="margin:0;color:#94a3b8;">Composez des packs pour faciliter les demandes de devis.</p>
  </div>
  <form action="/admin/packs" method="post" class="form-inline" style="display:flex;gap:12px;align-items:center;">
    <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
    <input type="text" name="name" placeholder="Nom" required />
    <input type="text" name="slug" placeholder="Slug" required />
    <input type="number" step="0.01" name="dailyPrice" placeholder="Prix/jour" required />
    <input type="text" name="imageUrl" placeholder="URL image" />
    <button type="submit">Créer</button>
  </form>
</header>

<table>
  <thead>
    <tr>
      <th>Nom</th>
      <th>Slug</th>
      <th>Tarif/jour</th>
      <th>Éléments</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% if (packs.length === 0) { %>
      <tr><td colspan="5">Aucun pack enregistré pour l'instant.</td></tr>
    <% } %>
    <% packs.forEach((pack) => { %>
      <tr>
        <td><%= pack.name %></td>
        <td><code><%= pack.slug %></code></td>
        <td><%= pack.dailyPrice.toLocaleString('fr-FR', { style: 'currency', currency: 'EUR' }) %></td>
        <td>
          <% if (pack.items.length === 0) { %>
            <span class="tag">Vide</span>
          <% } else { %>
            <%= pack.items.map((item) => `${item.name} ×${item.quantity}`).join(', ') %>
          <% } %>
        </td>
        <td class="actions">
          <a class="button-link" href="/admin/packs/<%= pack.id %>">Modifier</a>
          <form action="/admin/packs/<%= pack.id %>/delete" method="post" onsubmit="return confirm('Supprimer ce pack ?');">
            <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
            <button type="submit" class="danger">Supprimer</button>
          </form>
        </td>
      </tr>
    <% }) %>
  </tbody>
</table>
